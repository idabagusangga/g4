{"ast":null,"code":"import _regeneratorRuntime from\"/Users/angga/Documents/gaspack/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/angga/Documents/gaspack/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/angga/Documents/gaspack/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/angga/Documents/gaspack/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/angga/Documents/gaspack/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useState,useEffect}from'react';import{Text}from'../Components';import Card from'../Components/Card';import{Colors}from'../Constants';import StyledDiv from'./styled';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TablePage(props){var _state$data;// states\nvar _useState=useState({data:[],page:1,pageSize:10,result:10,trending:[],isCover:false,noData:false,search:'batman'}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];/**\n     * Scroll listener\n     */window.onscroll=function(){if(window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight){if(!state.noData){getApiData();}}};/**\n     * call api on first init\n     */useEffect(function(){getApiData();},[]);useEffect(function(){getApiData();},[state.search]);/**\n     * Api get function and sets data state.\n     */var getApiData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var baseUrl,config;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:baseUrl='http://www.omdbapi.com';config={params:{apiKey:'faf7e5bb',s:state.search,page:state.page}};axios.get(baseUrl,config).then(function(res){if(res.data&&res.data.Search){setState(function(state){return _objectSpread(_objectSpread({},state),{},{data:state.data.length==0?res.data.Search:[].concat(_toConsumableArray(state.data),_toConsumableArray(res.data.Search)),page:state.page+1});});}}).catch(function(e){return console.log(e);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getApiData(){return _ref.apply(this,arguments);};}();var search=function search(e){clearTimeout();if(e.target.value.length>5){setTimeout(function(){setState(function(state){return _objectSpread(_objectSpread({},state),{},{search:e.target.value,data:[]});});},200);}};var _showDetail=function showDetail(d){setState(function(state){return _objectSpread(_objectSpread({},state),{},{chosenMovie:d,isCover:true});});};var closeDetail=function closeDetail(){setState(function(state){return _objectSpread(_objectSpread({},state),{},{isCover:false,chosenMovie:null});});};var renderCards=function renderCards(data){return data.map(function(d,i){return/*#__PURE__*/_jsx(Card,{background:d.Poster,title:d.Title,genres:d.genres,type:d.Type,averageScore:d.Year,popularity:d.popularity,siteUrl:d.imdbID,showDetail:function showDetail(){return _showDetail(d);}},d.id);});};return/*#__PURE__*/_jsx(StyledDiv,{isCover:state.isCover,children:/*#__PURE__*/_jsxs(\"div\",{className:\"outer-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-container-cover flex-col\",children:state.chosenMovie?/*#__PURE__*/_jsx(Card,{background:state.chosenMovie.Poster,title:state.chosenMovie.Title,genres:state.chosenMovie.genres,type:state.chosenMovie.Type,averageScore:state.chosenMovie.Year,popularity:state.chosenMovie.popularity,siteUrl:state.chosenMovie.imdbID,closeDetail:closeDetail,large:true}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"inner-container flex-col width100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar flex-row width100\",children:[/*#__PURE__*/_jsx(\"input\",{onKeyUp:function onKeyUp(e){return search(e);}}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",children:/*#__PURE__*/_jsx(Text,{content:\"search\",style:\"small\",bold:true,color:Colors.black.primary})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"title-container flex-col width100\",children:/*#__PURE__*/_jsx(Text,{content:\"List\",style:\"title\",bold:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-container flex-row\",children:((_state$data=state.data)===null||_state$data===void 0?void 0:_state$data.length)>0?renderCards(state.data):null})]})]})});}","map":{"version":3,"names":["axios","React","useState","useEffect","Text","Card","Colors","StyledDiv","TablePage","props","data","page","pageSize","result","trending","isCover","noData","search","state","setState","window","onscroll","innerHeight","document","documentElement","scrollTop","offsetHeight","getApiData","baseUrl","config","params","apiKey","s","get","then","res","Search","length","catch","e","console","log","clearTimeout","target","value","setTimeout","showDetail","d","chosenMovie","closeDetail","renderCards","map","i","Poster","Title","genres","Type","Year","popularity","imdbID","id","black","primary"],"sources":["/Users/angga/Documents/gaspack/src/Page/index.js"],"sourcesContent":["import axios from 'axios'\nimport React, {useState, useEffect} from 'react'\nimport { Text } from '../Components'\nimport Card from '../Components/Card'\nimport { Colors } from '../Constants'\nimport StyledDiv from './styled'\n\nexport default function TablePage(props) {\n    // states\n    const [state, setState] = useState({\n        data: [],\n        page: 1,\n        pageSize: 10,\n        result: 10,\n        trending: [],\n        isCover: false,\n        noData: false,\n        search: 'batman'\n    })\n\n    /**\n     * Scroll listener\n     */\n    window.onscroll = () => {\n        if (window.innerHeight + document.documentElement.scrollTop === document.documentElement.offsetHeight) {\n            if(!state.noData) {\n                getApiData()\n            }\n        }\n    }\n    \n    /**\n     * call api on first init\n     */\n    useEffect(() => {\n        getApiData()\n    }, [])\n    useEffect(() => {\n        getApiData()\n    }, [state.search])\n    /**\n     * Api get function and sets data state.\n     */\n    const getApiData = async () => {\n        const baseUrl = 'http://www.omdbapi.com'\n        const config = {\n            params: {\n                apiKey: 'faf7e5bb',\n                s: state.search,\n                page: state.page\n            }\n        }\n        axios.get(baseUrl, config)\n        .then(res => {\n            if(res.data && res.data.Search) {\n\n                setState(state => ({\n                    ...state,\n                    data: state.data.length == 0 ? res.data.Search : [...state.data, ...res.data.Search],\n                    page: state.page + 1\n                }))\n            }\n        })\n        .catch(e => console.log(e))\n    }\n\n    const search = (e) => {\n        clearTimeout()\n        if(e.target.value.length > 5) {\n\n            setTimeout(() => {\n                setState(state => ({\n                    ...state,\n                    search: e.target.value,\n                    data: []\n                }))\n            }, 200)\n        }\n    }\n\n    const showDetail = (d) => {\n        setState(state => ({\n            ...state,\n            chosenMovie: d,\n            isCover: true\n        }))\n    }\n    \n    const closeDetail = () => {\n        setState(state => ({\n            ...state,\n            isCover: false,\n            chosenMovie: null\n        }))\n    }\n\n    const renderCards = (data) => {\n        return data.map((d,i) => {\n            return <Card\n                key = {d.id}\n                background = {d.Poster}\n                title = {d.Title}\n                genres = {d.genres}\n                type = {d.Type}\n                averageScore = {d.Year}\n                popularity = {d.popularity}\n                siteUrl = {d.imdbID}\n                showDetail = {() => showDetail(d)}\n            />\n        })\n    }\n    return (\n        <StyledDiv\n            isCover = {state.isCover}\n        >\n            <div className = 'outer-container'>\n                <div className = 'modal-container-cover flex-col'>\n                    {\n                        state.chosenMovie ? \n                        <Card\n                            background = {state.chosenMovie.Poster}\n                            title = {state.chosenMovie.Title}\n                            genres = {state.chosenMovie.genres}\n                            type = {state.chosenMovie.Type}\n                            averageScore = {state.chosenMovie.Year}\n                            popularity = {state.chosenMovie.popularity}\n                            siteUrl = {state.chosenMovie.imdbID}\n                            closeDetail = {closeDetail}\n                            large\n                        /> : null\n                    }\n                </div>\n                <div className = 'inner-container flex-col width100'>\n                    <div className = 'search-bar flex-row width100'>\n                        <input onKeyUp = {(e) => search(e)}/>\n                        <div className='button'>\n                            <Text content = 'search' style = 'small' bold color = {Colors.black.primary}/>\n                        </div>\n                    </div>\n                    <div className = 'title-container flex-col width100'>\n\n                        <Text content = 'List' style = 'title' bold/>\n\n                    </div>\n                    <div className = 'card-container flex-row'>\n                        {state.data?.length > 0 ? renderCards(state.data) : null}\n\n                    </div>\n                    \n                    \n                    \n                </div>\n            </div>\n        </StyledDiv>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}