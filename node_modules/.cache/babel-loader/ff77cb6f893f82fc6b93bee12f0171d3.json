{"ast":null,"code":"var _jsxFileName = \"/Users/angga/Documents/gaspack/src/Page/index.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { Text } from '../Components';\nimport Card from '../Components/Card';\nimport { Colors } from '../Constants';\nimport StyledDiv from './styled';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TablePage(props) {\n  _s();\n\n  var _state$data;\n\n  // states\n  const [state, setState] = useState({\n    data: [],\n    page: 1,\n    pageSize: 10,\n    result: 10,\n    trending: [],\n    isCover: false,\n    noData: false,\n    search: 'batman'\n  });\n  /**\n   * Scroll listener\n   */\n\n  window.onscroll = () => {\n    if (window.innerHeight + document.documentElement.scrollTop === document.documentElement.offsetHeight) {\n      if (!state.noData) {\n        getApiData();\n      }\n    }\n  };\n  /**\n   * call api on first init\n   */\n\n\n  useEffect(() => {\n    getApiData();\n  }, []);\n  useEffect(() => {\n    getApiData();\n  }, [state.search]);\n  /**\n   * Api get function and sets data state.\n   */\n\n  const getApiData = async () => {\n    const baseUrl = 'http://www.omdbapi.com';\n    const config = {\n      params: {\n        apiKey: 'faf7e5bb',\n        s: state.search,\n        page: state.page\n      }\n    };\n    axios.get(baseUrl, config).then(res => {\n      if (res.data && res.data.Search) {\n        setState(state => ({ ...state,\n          data: state.data.length == 0 ? res.data.Search : [...state.data, ...res.data.Search],\n          page: state.page + 1\n        }));\n      }\n    }).catch(e => console.log(e));\n  };\n\n  const search = e => {\n    clearTimeout();\n\n    if (e.target.value.length > 5) {\n      setTimeout(() => {\n        setState(state => ({ ...state,\n          search: e.target.value,\n          data: []\n        }));\n      }, 200);\n    }\n  };\n\n  const showDetail = d => {\n    setState(state => ({ ...state,\n      chosenMovie: d,\n      isCover: true\n    }));\n  };\n\n  const closeDetail = () => {\n    setState(state => ({ ...state,\n      isCover: false,\n      chosenMovie: null\n    }));\n  };\n\n  const renderCards = data => {\n    return data.map((d, i) => {\n      return /*#__PURE__*/_jsxDEV(Card, {\n        background: d.Poster,\n        title: d.Title,\n        genres: d.genres,\n        type: d.Type,\n        averageScore: d.Year,\n        popularity: d.popularity,\n        siteUrl: d.imdbID,\n        showDetail: () => showDetail(d)\n      }, d.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 20\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(StyledDiv, {\n    isCover: state.isCover,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outer-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-container-cover flex-col\",\n        children: state.chosenMovie ? /*#__PURE__*/_jsxDEV(Card, {\n          background: state.chosenMovie.Poster,\n          title: state.chosenMovie.Title,\n          genres: state.chosenMovie.genres,\n          type: state.chosenMovie.Type,\n          averageScore: state.chosenMovie.Year,\n          popularity: state.chosenMovie.popularity,\n          siteUrl: state.chosenMovie.imdbID,\n          large: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inner-container flex-col width100\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-bar flex-row width100\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onKeyUp: e => search(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"button\",\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              content: \"search\",\n              style: \"small\",\n              bold: true,\n              color: Colors.black.primary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title-container flex-col width100\",\n          children: /*#__PURE__*/_jsxDEV(Text, {\n            content: \"List\",\n            style: \"title\",\n            bold: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-container flex-row\",\n          children: ((_state$data = state.data) === null || _state$data === void 0 ? void 0 : _state$data.length) > 0 ? renderCards(state.data) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(TablePage, \"NtXHlsY3O6+QqRXkN/pvZuTo0fE=\");\n\n_c = TablePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"TablePage\");","map":{"version":3,"names":["axios","React","useState","useEffect","Text","Card","Colors","StyledDiv","TablePage","props","state","setState","data","page","pageSize","result","trending","isCover","noData","search","window","onscroll","innerHeight","document","documentElement","scrollTop","offsetHeight","getApiData","baseUrl","config","params","apiKey","s","get","then","res","Search","length","catch","e","console","log","clearTimeout","target","value","setTimeout","showDetail","d","chosenMovie","closeDetail","renderCards","map","i","Poster","Title","genres","Type","Year","popularity","imdbID","id","black","primary"],"sources":["/Users/angga/Documents/gaspack/src/Page/index.js"],"sourcesContent":["import axios from 'axios'\nimport React, {useState, useEffect} from 'react'\nimport { Text } from '../Components'\nimport Card from '../Components/Card'\nimport { Colors } from '../Constants'\nimport StyledDiv from './styled'\n\nexport default function TablePage(props) {\n    // states\n    const [state, setState] = useState({\n        data: [],\n        page: 1,\n        pageSize: 10,\n        result: 10,\n        trending: [],\n        isCover: false,\n        noData: false,\n        search: 'batman'\n    })\n\n    /**\n     * Scroll listener\n     */\n    window.onscroll = () => {\n        if (window.innerHeight + document.documentElement.scrollTop === document.documentElement.offsetHeight) {\n            if(!state.noData) {\n                getApiData()\n            }\n        }\n    }\n    \n    /**\n     * call api on first init\n     */\n    useEffect(() => {\n        getApiData()\n    }, [])\n    useEffect(() => {\n        getApiData()\n    }, [state.search])\n    /**\n     * Api get function and sets data state.\n     */\n    const getApiData = async () => {\n        const baseUrl = 'http://www.omdbapi.com'\n        const config = {\n            params: {\n                apiKey: 'faf7e5bb',\n                s: state.search,\n                page: state.page\n            }\n        }\n        axios.get(baseUrl, config)\n        .then(res => {\n            if(res.data && res.data.Search) {\n\n                setState(state => ({\n                    ...state,\n                    data: state.data.length == 0 ? res.data.Search : [...state.data, ...res.data.Search],\n                    page: state.page + 1\n                }))\n            }\n        })\n        .catch(e => console.log(e))\n    }\n\n    const search = (e) => {\n        clearTimeout()\n        if(e.target.value.length > 5) {\n\n            setTimeout(() => {\n                setState(state => ({\n                    ...state,\n                    search: e.target.value,\n                    data: []\n                }))\n            }, 200)\n        }\n    }\n\n    const showDetail = (d) => {\n        setState(state => ({\n            ...state,\n            chosenMovie: d,\n            isCover: true\n        }))\n    }\n    \n    const closeDetail = () => {\n        setState(state => ({\n            ...state,\n            isCover: false,\n            chosenMovie: null\n        }))\n    }\n\n    const renderCards = (data) => {\n        return data.map((d,i) => {\n            return <Card\n                key = {d.id}\n                background = {d.Poster}\n                title = {d.Title}\n                genres = {d.genres}\n                type = {d.Type}\n                averageScore = {d.Year}\n                popularity = {d.popularity}\n                siteUrl = {d.imdbID}\n                showDetail = {() => showDetail(d)}\n            />\n        })\n    }\n    return (\n        <StyledDiv\n            isCover = {state.isCover}\n        >\n            <div className = 'outer-container'>\n                <div className = 'modal-container-cover flex-col'>\n                    {\n                        state.chosenMovie ? \n                        <Card\n                            background = {state.chosenMovie.Poster}\n                            title = {state.chosenMovie.Title}\n                            genres = {state.chosenMovie.genres}\n                            type = {state.chosenMovie.Type}\n                            averageScore = {state.chosenMovie.Year}\n                            popularity = {state.chosenMovie.popularity}\n                            siteUrl = {state.chosenMovie.imdbID}\n                            large\n                        /> : null\n                    }\n                </div>\n                <div className = 'inner-container flex-col width100'>\n                    <div className = 'search-bar flex-row width100'>\n                        <input onKeyUp = {(e) => search(e)}/>\n                        <div className='button'>\n                            <Text content = 'search' style = 'small' bold color = {Colors.black.primary}/>\n                        </div>\n                    </div>\n                    <div className = 'title-container flex-col width100'>\n\n                        <Text content = 'List' style = 'title' bold/>\n\n                    </div>\n                    <div className = 'card-container flex-row'>\n                        {state.data?.length > 0 ? renderCards(state.data) : null}\n\n                    </div>\n                    \n                    \n                    \n                </div>\n            </div>\n        </StyledDiv>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}